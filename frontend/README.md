# PollCipher Frontend

PollCipher’s frontend is a Next.js 15 application that orchestrates the encrypted polling flow:

1. Connect a wallet using RainbowKit.
2. Encrypt a prediction choice in the browser and post it on-chain.
3. Decrypt tallies locally via the FHE SDK or request public results through the oracle.

---

## 1. Setup

```bash
cd pro1/frontend
npm install
```

Create a `.env.local` if you plan to use WalletConnect:

```
NEXT_PUBLIC_WALLETCONNECT_PROJECT_ID=your_project_id
```

Without a project ID the app still works with injected wallets (e.g. MetaMask, Rabby).

---

## 2. Development servers

```bash
# Mock mode – useful when you rely solely on the FHE mock runtime
npm run dev:mock

# Standard dev server – expects deployment files generated by `npm run genabi`
npm run dev
```

Visit [http://localhost:3000](http://localhost:3000).

---

## 3. Deployment data

The UI expects ABI + address maps in `frontend/abi/EncryptedPredictionPoll*.ts`.  
Generate/update them whenever you redeploy the contract:

```bash
npm run genabi
```

> This command looks for Hardhat Deploy artefacts in `../deployments/{localhost|sepolia}`. Ensure the backend deployment
> completed successfully beforehand.

---

## 4. Key files

- `app/layout.tsx` – Application shell, metadata, RainbowKit provider.
- `components/NavigationBar.tsx` – Brand navigation with connect button.
- `components/EncryptedPollExperience.tsx` – Main dashboard rendering the poll lifecycle.
- `hooks/useEncryptedPredictionPoll.tsx` – Fetches contract state, handles FHE encryption/decryption and orchestrates
  wagmi + FHEVM.
- `hooks/useWalletContext.tsx` – Thin wrapper on wagmi to expose ethers signers/providers.
- `fhevm/` – Unmodified helpers from Zama’s template for interacting with the WASM FHE runtime.

---

## 5. Styling & assets

- TailwindCSS for layout + design.
- Custom PollCipher logo and favicon live in `public/`.
- RainbowKit CSS is imported directly in `app/providers.tsx`.

---

## 6. Production build

```bash
npm run build
npm start
```

---

## 7. Troubleshooting

- **Missing contract address:** Regenerate deployment files (`npm run genabi`) or point the UI to the correct network.
- **Wallet not connecting:** Provide a WalletConnect project ID or use an injected wallet.
- **Local decrypt fails:** Ensure you have signed the FHE decryption message and that you voted (or are the poll
  creator).

---

Licensed under **BSD-3-Clause-Clear** – see the root `LICENSE` file.
